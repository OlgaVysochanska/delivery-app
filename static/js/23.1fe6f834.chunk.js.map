{"version":3,"file":"static/js/23.1fe6f834.chunk.js","mappings":"2MAAaA,EAAc,SAAC,GAAD,SAAGC,MAAkBC,KAArB,E,sCCEdC,EAAS,WACpB,OACE,SAAC,KAAD,CACEC,OAAO,KACPC,MAAM,KACNC,OAAO,KACPC,MAAM,UACNC,UAAU,gBACVC,aAAc,CAAC,EACfC,iBAAiB,GACjBC,SAAS,GAGd,ECdD,EAA6B,6BCwC7B,EAhCiB,WACf,IAAMC,GAAWC,EAAAA,EAAAA,OAEjBC,EAAAA,EAAAA,YAAU,WACRF,GAASG,EAAAA,EAAAA,MACTH,GAASI,EAAAA,EAAAA,GAAW,YACrB,GAAE,CAACJ,IAEJ,IAAMX,GAAQgB,EAAAA,EAAAA,IAAYjB,GAEpBkB,EAAWjB,EAAMkB,KAAI,SAAAC,GAAI,OAC7B,yBACE,mBACEC,UAAWC,EACXC,QAAS,WACPX,GAASI,EAAAA,EAAAA,GAAWI,EAAKI,OACzBC,aAAaC,QAAQ,OAAQN,EAAKI,KACnC,EALH,SAOGJ,EAAKI,QARDJ,EAAKO,IADe,IAc/B,OACE,0BACoB,IAAjB1B,EAAM2B,SAAgB,SAACzB,EAAD,IACtBe,IAGN,E,8BCvCYW,EAAc,SAAC,GAAD,SAAGC,MAAkB5B,KAArB,ECC3B,EAAyB,0BAAzB,EAAyD,uBAAzD,EAA4F,6BAA5F,EAAgI,wBCsEhI,EA/DkB,WAChB,OAAwC6B,EAAAA,EAAAA,UAAS,IAAjD,eAAOC,EAAP,KAAqBC,EAArB,KACMH,GAAQb,EAAAA,EAAAA,IAAYY,GACpBjB,GAAWC,EAAAA,EAAAA,MACXqB,EAAYT,aAAaU,QAAQ,WAEvCrB,EAAAA,EAAAA,YAAU,WACR,GAAkB,OAAdoB,GAA2C,IAArBA,EAAUN,OAAc,CAChD,IAAMQ,EAAWC,KAAKC,MAAMJ,GAC5BD,GAAgB,OAAIG,EAASjB,KAAI,SAAAC,GAAI,OAAIA,EAAKO,GAAT,KACtC,CACF,GAAE,CAACO,IAEJ,IAUMK,EAAYT,EAAMX,KAAI,SAAAC,GAC1B,OACE,2BACE,4BACE,gBAAKC,UAAWC,EAAYkB,IAAKpB,EAAKqB,IAAKC,IAAI,OAAOrC,MAAM,SAC5D,cAAGgB,UAAWC,EAAd,SAAiCF,EAAKuB,SACtC,yBAAG,UAAQvB,EAAKwB,YAEjBZ,EAAaa,SAASzB,EAAKO,MAC1B,mBACEN,UAAWC,EACXC,QAAS,kBAhBIuB,EAgBiB1B,EAftCR,GAASmC,EAAAA,EAAAA,IAAWD,SACpBb,EAAgBD,EAAagB,QAAO,SAAA5B,GAAI,OAAIA,EAAKO,MAAQmB,EAAKnB,GAAtB,KAFnB,IAAAmB,CAgBJ,EAFX,SAGC,sBAID,mBACEzB,UAAWC,EACXC,QAAS,WA5BD,IAAAuB,EA6BN,IAAIZ,IACEG,KAAKC,MAAMJ,GAAWe,MAAK,SAAAC,GAAG,OAAIA,EAAIC,OAAS/B,EAAK+B,IAAtB,IAOpC,OArCML,EAqCW1B,EApC3BR,GAASwC,EAAAA,EAAAA,IAASN,SAClBb,EAAgB,GAAD,eAAKD,GAAL,CAAmBc,EAAKnB,OA6BzB0B,MACE,oGAMP,EAZH,SAaC,kBA3BIjC,EAAKO,IAiCjB,IAED,OAAO,eAAIN,UAAWC,EAAf,SAA6BiB,GACrC,ECpED,EAA0B,0BCa1B,EATiB,WACf,OACE,iBAAKlB,UAAWC,EAAhB,WACE,SAAC,EAAD,KACA,SAAC,EAAD,MAGL,C","sources":["redux/shops/shopsSelectors.js","components/Loader/Loader.jsx","webpack://react-homework-template/./src/components/ShopList/ShopList.module.css?e511","components/ShopList/ShopList.jsx","redux/goods/goodsSelectors.js","webpack://react-homework-template/./src/components/GoodsList/GoodsList.module.css?8e3b","components/GoodsList/GoodsList.jsx","webpack://react-homework-template/./src/pages/ShopPage/ShopPage.module.css?b1ec","pages/ShopPage/ShopPage.jsx"],"sourcesContent":["export const selectShops = ({ shops }) => shops.items;\n","import { Watch } from 'react-loader-spinner';\n\nexport const Loader = () => {\n  return (\n    <Watch\n      height=\"80\"\n      width=\"80\"\n      radius=\"48\"\n      color=\"#ff6347\"\n      ariaLabel=\"watch-loading\"\n      wrapperStyle={{}}\n      wrapperClassName=\"\"\n      visible={true}\n    />\n  );\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"buttonShop\":\"ShopList_buttonShop__hcDCZ\"};","import { useDispatch, useSelector } from 'react-redux';\nimport { useEffect } from 'react';\nimport { selectShops } from 'redux/shops/shopsSelectors';\nimport { fetchShops } from 'redux/shops/shopsOperations';\nimport { fetchGoods } from 'redux/goods/goodsOperations';\nimport { Loader } from 'components/Loader/Loader';\n\nimport styles from './ShopList.module.css';\n\nconst ShopList = () => {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(fetchShops());\n    dispatch(fetchGoods('FastGood'));\n  }, [dispatch]);\n\n  const shops = useSelector(selectShops);\n\n  const shopBtns = shops.map(item => (\n    <li key={item._id}>\n      <button\n        className={styles.buttonShop}\n        onClick={() => {\n          dispatch(fetchGoods(item.name));\n          localStorage.setItem('shop', item.name);\n        }}\n      >\n        {item.name}\n      </button>\n    </li>\n  ));\n\n  return (\n    <ul>\n      {shops.length === 0 && <Loader />}\n      {shopBtns}\n    </ul>\n  );\n};\n\nexport default ShopList;\n","export const selectGoods = ({ goods }) => goods.items;\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"GoodsList_button__izDGf\",\"img\":\"GoodsList_img__NSveh\",\"goodTitle\":\"GoodsList_goodTitle__zoRtp\",\"list\":\"GoodsList_list__lxyED\"};","import { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { setGoods, removeItem } from 'redux/orders/ordersSlice';\nimport { selectGoods } from 'redux/goods/goodsSelectors';\n\nimport styles from './GoodsList.module.css';\n\nconst GoodsList = () => {\n  const [selectedFood, setSelectedFood] = useState([]);\n  const goods = useSelector(selectGoods);\n  const dispatch = useDispatch();\n  const localFood = localStorage.getItem('orders');\n\n  useEffect(() => {\n    if (localFood !== null && localFood.length !== 0) {\n      const selected = JSON.parse(localFood);\n      setSelectedFood([...selected.map(item => item._id)]);\n    }\n  }, [localFood]);\n\n  const addToCart = data => {\n    dispatch(setGoods(data));\n    setSelectedFood([...selectedFood, data._id]);\n  };\n\n  const removeFromCart = data => {\n    dispatch(removeItem(data));\n    setSelectedFood(selectedFood.filter(item => item._id !== data._id));\n  };\n\n  const goodsList = goods.map(item => {\n    return (\n      <li key={item._id}>\n        <div>\n          <img className={styles.img} src={item.url} alt=\"Food\" width=\"240\" />\n          <p className={styles.goodTitle}>{item.title}</p>\n          <p>Price: {item.price}</p>\n        </div>\n        {selectedFood.includes(item._id) ? (\n          <button\n            className={styles.button}\n            onClick={() => removeFromCart(item)}\n          >\n            Remove from cart\n          </button>\n        ) : (\n          <button\n            className={styles.button}\n            onClick={() => {\n              if (localFood) {\n                if (JSON.parse(localFood).find(ord => ord.shop !== item.shop)) {\n                  alert(\n                    'You can order products only from one shop. You already have items from another shop in your cart!'\n                  );\n                  return;\n                }\n              }\n              return addToCart(item);\n            }}\n          >\n            Add to cart\n          </button>\n        )}\n      </li>\n    );\n  });\n\n  return <ul className={styles.list}>{goodsList}</ul>;\n};\n\nexport default GoodsList;\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"ShopPage_content__FlRji\"};","import ShopList from 'components/ShopList/ShopList';\nimport GoodsList from 'components/GoodsList/GoodsList';\n\nimport styles from './ShopPage.module.css';\n\nconst ShopPage = () => {\n  return (\n    <div className={styles.content}>\n      <ShopList />\n      <GoodsList />\n    </div>\n  );\n};\n\nexport default ShopPage;\n"],"names":["selectShops","shops","items","Loader","height","width","radius","color","ariaLabel","wrapperStyle","wrapperClassName","visible","dispatch","useDispatch","useEffect","fetchShops","fetchGoods","useSelector","shopBtns","map","item","className","styles","onClick","name","localStorage","setItem","_id","length","selectGoods","goods","useState","selectedFood","setSelectedFood","localFood","getItem","selected","JSON","parse","goodsList","src","url","alt","title","price","includes","data","removeItem","filter","find","ord","shop","setGoods","alert"],"sourceRoot":""}