"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[543],{854:function(e,t,n){n.d(t,{a:function(){return o}});var r=n(643),a=n(184),o=function(){return(0,a.jsx)(r.RL,{height:"80",width:"80",radius:"48",color:"#ff6347",ariaLabel:"watch-loading",wrapperStyle:{},wrapperClassName:"",visible:!0})}},5543:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var r=n(9434),a=n(7993),o=n(1413),i=n(9439),l=n(2791),s=n(8543),u={lat:-3.745,lng:-38.523},c={name:"",email:"",phone:"",address:""},d=n(1701),m="GoogleMaps_container__5MOJM",h=n(184),p={width:"400px",heigth:"400px"},f=function(e){var t=e.userLocation,n=(0,l.useMemo)((function(){return{lat:43,lng:50}}),[]);console.log(t);var r=(0,l.useRef)(void 0),o=(0,l.useCallback)((function(e){r.current=e}),[]),i=(0,l.useCallback)((function(){r.current=void 0}),[]);return(0,h.jsx)("div",{className:m,children:(0,h.jsx)(a.b6,{mapContainerStyle:p,center:n,zoom:10,onLoad:o,onUnmount:i,children:(0,h.jsx)(a.Jx,{position:t,draggable:!1,icon:{url:"images/shop.png"},label:{text:"Current shop"}})})})},g="OrderForm_button__YYeSI",_="OrderForm_form__mnAgW",v=function(e){var t=e.onSubmit,n=e.listOfOrders,r=e.total,m=(0,l.useState)(null),p=(0,i.Z)(m,2),v=p[0],x=p[1],j=(0,l.useState)(null),S=(0,i.Z)(j,2),b=S[0],y=S[1],C=(0,l.useState)(""),O=(0,i.Z)(C,2),N=O[0],Z=O[1],L=(0,s.Z)({initialState:c}),w=L.state,P=L.setState,k=L.handleChange,I=function(e,n){e.preventDefault(),t(n),P((0,o.Z)({},c))},E=localStorage.getItem("shop"),R=w.email,T=w.name,M=w.phone;return(0,l.useEffect)((function(){new Promise((function(e,t){"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(t){var n=t.coords,r=n.latitude,a=n.longitude;e({lat:r,lng:a})}),(function(){t(u)})):t(u)})).then((function(e){x(e)})).catch((function(e){x(e)}))}),[]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(f,{userLocation:v}),(0,h.jsxs)("form",{className:_,onSubmit:function(e){I(e,(0,o.Z)((0,o.Z)({},w),{},{address:N,owner:R,shop:E,goods:n,totalPrice:r}))},children:[(0,h.jsx)(a.F2,{options:{componentRestrictions:{country:"ua"},language:"uk"},onLoad:function(e){y(e)},onPlaceChanged:function(){return function(e,t,n){if(e){var r=e.getPlace();if(r&&r.geometry&&r.geometry.location){var a=r.geometry.location.lat(),o=r.geometry.location.lng();t(r.formatted_address),n({lat:a,lng:o})}}}(b,Z,x)},children:(0,h.jsx)(d.Z,{id:"address",label:"Your address",name:"address",value:N,placeholder:"your address",type:"text",handleChange:k})}),(0,h.jsx)(d.Z,{id:"name",label:"Your name",name:"name",value:T,placeholder:"your name",type:"text",handleChange:function(e){return k(e)}}),(0,h.jsx)(d.Z,{id:"email",label:"Your email",name:"email",value:R,placeholder:"your email",type:"email",handleChange:function(e){return k(e)}}),(0,h.jsx)(d.Z,{id:"phone",label:"Your phone",name:"phone",value:M,placeholder:"your phone",type:"tel",handleChange:k}),(0,h.jsxs)("div",{className:g,children:["Total: ",""," ",r]}),(0,h.jsx)("button",{className:g,children:"SUBMIT YOUR ORDER"})]})]})},x=n(3666),j=n(3351),S="OrderList_img__TPr61",b="OrderList_desc__RCLrB",y="OrderList_goodTitle__KQ6YM",C="OrderList_list__c7IU4",O="OrderList_input__KdChA",N="OrderList_totalPrice__tdns3",Z="OrderList_delete__2w8ll";var L=function(e){return(0,h.jsx)("svg",(0,o.Z)((0,o.Z)({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,h.jsx)("path",{d:"M19 5L5 19M5 5l14 14",stroke:"#fff",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})}))},w=function(){var e=(0,r.v9)(j.Dp).goods,t=(0,r.I0)();(0,l.useEffect)((function(){0===e.length?t((0,x.m1)(0)):t((0,x.m1)(e.map((function(e){return Number(e.price)*Number(e.quantity)})).reduce((function(e,t){return e+t}),0)))}),[t,e]);var n=e.map((function(n){return(0,h.jsxs)("li",{children:[(0,h.jsx)("img",{className:S,src:n.url,alt:"Food",width:"300"}),(0,h.jsxs)("div",{className:b,children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:y,children:n.title}),(0,h.jsxs)("p",{children:["Price: ",n.price]}),(0,h.jsxs)("label",{children:["Quantity:"," ",(0,h.jsx)("input",{className:O,type:"number",name:"quantity",min:"1",max:"50",onChange:function(r){return function(n,r){localStorage.removeItem("orders"),t((0,x.M$)({quantity:Number(n.target.value),_id:r})),localStorage.setItem("orders",JSON.stringify(e))}(r,n._id)},value:n.quantity,step:"1"})]}),(0,h.jsxs)("p",{className:N,children:["Price for ",n.quantity," products:"," ",n.quantity?Number(n.price)*Number(n.quantity):n.price]})]}),(0,h.jsx)("button",{onClick:function(){return e=n,void t((0,x.cl)(e));var e},type:"button",className:Z,children:(0,h.jsx)(L,{})})]})]},n._id)}));return(0,h.jsx)("ul",{className:C,children:n})},P=n(9524),k=n(854),I="ShoppingCartPage_content__IYoK+",E=function(){var e=JSON.parse(localStorage.getItem("orders"))?JSON.parse(localStorage.getItem("orders")):[],t=(0,r.I0)(),n=(0,r.v9)(j.Dp).totalPrice,o=(0,r.v9)(j.yZ),i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GOOGLE_MAPS_API_KEY;return(0,h.jsx)(a.KJ,{googleMapsApiKey:i,libraries:["places"],children:(0,h.jsxs)("div",{className:I,children:[(0,h.jsx)(v,{onSubmit:function(e){t((0,P.L)(e))},listOfOrders:e,total:n}),o?(0,h.jsx)(k.a,{}):(0,h.jsx)(w,{})]})})}},3351:function(e,t,n){n.d(t,{Dp:function(){return r},_Y:function(){return a},yZ:function(){return o}});var r=function(e){return e.orders.orders},a=function(e){return e.orders.userOrders},o=function(e){return e.orders.isLoading}},1701:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(4925),a="Input_input__2SVdu",o="Input_label__pfJzW",i=n(184),l=["label","type","name","id","placeholder","title","value","handleChange"],s=function(e){var t=e.label,n=e.type,s=e.name,u=e.id,c=e.placeholder,d=e.title,m=e.value,h=e.handleChange;(0,r.Z)(e,l);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("label",{className:o,htmlFor:u,children:t}),(0,i.jsx)("input",{type:n,name:s,id:u,placeholder:c,title:d,value:m,onChange:h,className:a})]})}},8543:function(e,t,n){var r=n(4942),a=n(1413),o=n(9439),i=n(2791);t.Z=function(e){var t=e.initialState,n=e.onSubmit,l=(0,i.useState)((0,a.Z)({},t)),s=(0,o.Z)(l,2),u=s[0],c=s[1],d=(0,i.useCallback)((function(e){var t=e.target,n=t.name,o=t.value;c((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,r.Z)({},n,o))}))}),[c]);return{state:u,setState:c,handleChange:d,handleSubmit:function(e){e.preventDefault(),n((0,a.Z)({},u)),c((0,a.Z)({},t))}}}}}]);
//# sourceMappingURL=543.8b6a888e.chunk.js.map