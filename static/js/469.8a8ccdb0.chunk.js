"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[469],{469:function(e,t,r){r.r(t),r.d(t,{default:function(){return Z}});var n=r(9434),a=r(1413),l=r(8543),o={name:"",email:"",phone:"",address:""},s=r(675),i="OrderForm_button__YYeSI",u="OrderForm_form__mnAgW",c=r(184),d=function(e){var t=e.onSubmit,r=e.listOfOrders,n=e.total,d=(0,l.Z)({initialState:o}),m=d.state,h=d.setState,f=d.handleChange,p=function(e,r){e.preventDefault(),t(r),h((0,a.Z)({},o))},g=localStorage.getItem("shop"),_=m.email,v=m.name,b=m.phone,O=m.address;return(0,c.jsxs)("form",{className:u,onSubmit:function(e){p(e,(0,a.Z)((0,a.Z)({},m),{},{owner:_,shop:g,goods:r,totalPrice:n}))},children:[(0,c.jsx)(s.Z,{id:"name",label:"Your name",name:"name",value:v,placeholder:"your name",type:"text",handleChange:function(e){return f(e)}}),(0,c.jsx)(s.Z,{id:"email",label:"Your email",name:"email",value:_,placeholder:"your email",type:"email",handleChange:function(e){return f(e)}}),(0,c.jsx)(s.Z,{id:"phone",label:"Your phone",name:"phone",value:b,placeholder:"your phone",type:"tel",handleChange:f}),(0,c.jsx)(s.Z,{id:"address",label:"Your address",name:"address",value:O,placeholder:"your address",type:"text",handleChange:f}),(0,c.jsxs)("div",{className:i,children:["Total: ",""," ",n]}),(0,c.jsx)("button",{className:i,children:"SUBMIT YOUR ORDER"})]})},m=r(9439),h=r(2791),f=r(3666),p=r(3351),g="OrderList_img__TPr61",_="OrderList_desc__RCLrB",v="OrderList_goodTitle__KQ6YM",b="OrderList_list__c7IU4",O="OrderList_input__KdChA",y="OrderList_totalPrice__tdns3",S="OrderList_delete__2w8ll",x=function(){var e=(0,h.useState)([]),t=(0,m.Z)(e,2),r=t[0],a=t[1],l=(0,n.v9)(p.D).goods,o=localStorage.getItem("orders");(0,h.useEffect)((function(){a(l)}),[l]),(0,h.useEffect)((function(){try{var e=o?JSON.parse(o):[];a(e)}catch(t){console.log(t.message)}}),[o]);var s=(0,n.I0)();(0,h.useEffect)((function(){0===r.length?s((0,f.m1)(0)):s((0,f.m1)(r.map((function(e){return Number(e.price)*Number(e.quantity)})).reduce((function(e,t){return console.log(t),e+t}),0)))}),[s,r]);var i=r.map((function(e){return(0,c.jsxs)("li",{children:[(0,c.jsx)("img",{className:g,src:e.url,alt:"Food",width:"300"}),(0,c.jsxs)("div",{className:_,children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:v,children:e.title}),(0,c.jsxs)("p",{children:["Price: ",e.price]}),(0,c.jsxs)("label",{children:["Quantity:"," ",(0,c.jsx)("input",{className:O,type:"number",name:"quantity",min:"1",max:"50",onChange:function(t){return function(e,t){localStorage.removeItem("orders"),s((0,f.M$)({quantity:Number(e.target.value),_id:t})),localStorage.setItem("orders",JSON.stringify(l));var r=JSON.parse(o);a(r)}(t,e._id)},value:e.quantity,step:"1"})]}),(0,c.jsxs)("p",{className:y,children:["Price for ",e.quantity," products:"," ",e.quantity?Number(e.price)*Number(e.quantity):e.price]})]}),(0,c.jsx)("button",{onClick:function(){return t=e,s((0,f.cl)(t)),localStorage.removeItem("orders"),void localStorage.setItem("orders",JSON.stringify(l));var t},type:"button",className:S,children:"X"})]})]},e._id)}));return console.log(r,"goodsList"),(0,c.jsx)("ul",{className:b,children:i})},j=r(9524),N="ShoppingCartPage_content__IYoK+",Z=function(){var e=JSON.parse(localStorage.getItem("orders"))?JSON.parse(localStorage.getItem("orders")):[],t=(0,n.I0)(),r=(0,n.v9)(p.D).totalPrice;return(0,c.jsxs)("div",{className:N,children:[(0,c.jsx)(d,{onSubmit:function(e){t((0,j.L)(e))},listOfOrders:e,total:r}),(0,c.jsx)(x,{listOfOrders:e})]})}},3351:function(e,t,r){r.d(t,{D:function(){return n},_:function(){return a}});var n=function(e){return e.orders.orders},a=function(e){return e.orders.userOrders}},675:function(e,t,r){function n(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}r.d(t,{Z:function(){return i}});var a="Input_input__2SVdu",l="Input_label__pfJzW",o=r(184),s=["label","type","name","id","placeholder","title","value","handleChange"],i=function(e){var t=e.label,r=e.type,i=e.name,u=e.id,c=e.placeholder,d=e.title,m=e.value,h=e.handleChange;n(e,s);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("label",{className:l,htmlFor:u,children:t}),(0,o.jsx)("input",{type:r,name:i,id:u,placeholder:c,title:d,value:m,onChange:h,className:a})]})}},8543:function(e,t,r){var n=r(4942),a=r(1413),l=r(9439),o=r(2791);t.Z=function(e){var t=e.initialState,r=e.onSubmit,s=(0,o.useState)((0,a.Z)({},t)),i=(0,l.Z)(s,2),u=i[0],c=i[1],d=(0,o.useCallback)((function(e){var t=e.target,r=t.name,l=t.value;c((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,n.Z)({},r,l))}))}),[c]);return{state:u,setState:c,handleChange:d,handleSubmit:function(e){e.preventDefault(),r((0,a.Z)({},u)),c((0,a.Z)({},t))}}}}}]);
//# sourceMappingURL=469.8a8ccdb0.chunk.js.map